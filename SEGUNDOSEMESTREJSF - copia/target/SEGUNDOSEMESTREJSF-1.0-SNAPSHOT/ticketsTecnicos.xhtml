<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="jakarta.faces.html"
      xmlns:f="jakarta.faces.core"
      xmlns:p="http://primefaces.org/ui">

<f:event type="preRenderView" listener="#{ticketsTecnicosBean.cargarTickets}" />

<h:head>
    <title>Tickets Técnicos</title>
</h:head>
<h:body style="background-color:#f8f9fa; padding:20px;">
    <h:form>
        <p:panel header="Todos los Tickets" style="width: 900px; margin: 50px auto;">
            <p:messages closable="true"/>

            <p:dataTable value="#{ticketsTecnicosBean.listaTickets}" var="ticket"
                         rows="10" paginator="true" paginatorPosition="bottom" style="width:100%">

                <p:column headerText="ID">
                    <h:outputText value="#{ticket.idTicket}" />
                </p:column>

                <p:column headerText="Título">
                    <h:outputText value="#{ticket.titulo}" />
                </p:column>

                <p:column headerText="Descripción">
                    <h:outputText value="#{ticket.descripcion}" />
                </p:column>

                <p:column headerText="Fecha">
                    <h:outputText value="#{ticket.fechaCreacion}" />
                </p:column>

                <p:column headerText="Prioridad">
                    <h:outputText value="#{ticket.prioridad}" />
                </p:column>

                <p:column headerText="Estado">
                    <h:outputText value="#{ticketsTecnicosBean.nombreEstado(ticket.estadoId)}" />
                </p:column>

                <p:column headerText="Acciones" style="text-align:right">
                    <p:commandButton value="Ver Ticket"
                                     action="#{ticketsTecnicosBean.verTicket(ticket)}"
                                     update="@form"
                                     icon="pi pi-eye"
                                     styleClass="p-button-info p-button-sm" />
                </p:column>

            </p:dataTable>
  
            <p:separator/>
            
            <p:separator />
                        <p:separator />

            <p:commandButton value="Volver al Menú" action="Menu.xhtml?faces-redirect=true" icon="pi pi-arrow-left" style="width:100%" />
        </p:panel>
    </h:form>
</h:body>
</html>
